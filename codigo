// Función para enviar datos a través de Bluetooth
async function sendDataViaBluetooth(data) {
    try {
        // Solicitar permiso para acceder al dispositivo Bluetooth
        const device = await navigator.bluetooth.requestDevice({
            filters: [{ services: ['<insertar aquí el ID del servicio Bluetooth>'] }]
        });

        // Conectar con el dispositivo Bluetooth seleccionado
        const server = await device.gatt.connect();

        // Obtener el servicio Bluetooth
        const service = await server.getPrimaryService('<insertar aquí el ID del servicio Bluetooth>');

        // Obtener la característica del servicio Bluetooth
        const characteristic = await service.getCharacteristic('<insertar aquí el ID de la característica Bluetooth>');

        // Convertir los datos a un ArrayBuffer
        const dataArrayBuffer = new TextEncoder().encode(data);

        // Enviar los datos a través de Bluetooth
        await characteristic.writeValue(dataArrayBuffer);

        console.log('Datos enviados correctamente a través de Bluetooth.');
    } catch (error) {
        console.error('Error al enviar datos a través de Bluetooth:', error);
    }
}

// Evento de envío de datos cuando se envía el formulario
document.getElementById('red').addEventListener('submit', function(event) {
    event.preventDefault(); // Evitar que el formulario se envíe normalmente

    const formData = new FormData(this);
    const jsonData = JSON.stringify(Object.fromEntries(formData));

    // Llamar a la función para enviar los datos a través de Bluetooth
    sendDataViaBluetooth(jsonData);
});